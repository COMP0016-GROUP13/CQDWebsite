<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Design</title>

    <!-- font -->
    <link href="static/css/css2.css" rel="stylesheet">
    <!-- end font -->

    <link rel="stylesheet" href="static/css/bootstrap.css">
    <link rel="stylesheet" href="static/css/ionicons.min.css">
    <link rel="stylesheet" href="static/css/magnific-popup.css">
    <link rel="stylesheet" href="static/css/fakeLoader.min.css">
    <link rel="stylesheet" href="static/css/swiper-bundle.min.css">
    <link rel="stylesheet" href="static/css/style.css">
</head>

<body>

    <!-- loader -->
    <div class="fakeLoader"></div>
    <!-- end loader -->

    <!-- navbar -->
    <div style="padding: 5% 0 5% 0;">
        <nav class="navbar navbar-expand-md navbar-light fixed-top">
            <div class="container">
                <a href="index.html" class="navbar-brand">
                    <img src="static/picture/logo_2_onlylogo.png" alt="">
                    <h2 style="color:#00a2e8;">CQD</h2>
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <i class="icon ion-ios-menu"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul id="nav" class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Home</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="requirements.html">Requirements</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="research.html">Research</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="uidesign.html">UI Design</a>
                        </li>
                        <li class="nav-item">

                        <li class="nav-item current">
                            <a class="nav-link" href="systemdesign.html">System Design</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="implementation.html">Implementation</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="testing.html">Testing</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="evaluation.html">Evaluation</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="appendices.html">Appendices</a>
                        </li>
                </ul>
                </div>
            </div>
        </nav>
    </div>
    <!-- end navbar -->

    <!-- contents -->
    <div class="container" style="padding: 0 0 5% 0;">
        <div class="h1 col text-center" style="color:#00a2e8;">
            System Design
        </div>
    </div>
    <!-- end contents-->

    <!-- frontend -->
    <div class="container">
        <h2 style="color:#00a2e8;">
            System Architecture Diagram
        </h2>
        <br>
        <div class="h4 text-center" style="padding-bottom: 1.5em;">
            About the system we have a frontend authentication powered by next.js and Keycolak, which is used to connect key of the access of the middleware for authentication services. The entire system is containerised via Docker. And the Keycloak is used as the
            identity and access management tool, with a single instance hosted alongside the web-app. NextAuth.js facilitates interaction between the web-app and the Keycloak OpenID Connect interface. In addition, various API routes internally use the
            Keycloak Admin REST API to interact with Keycloak when certain actions are performed.
        </div>
        <div class="card-deck">
            <div class="card">
                <img class="card-img-bottom" src="./static/image/system_architecture.png">
            </div>
        </div>
    </div>
    <!-- end frontend -->

    <!-- backend -->
    <div class="container">
        <br>
        <br>
        <h2 style="color:#00a2e8;">
            ERD Diagram
        </h2>
        <div class="h4 text-center" style="padding-bottom: 1.5em;">
            <br> For the backend we use the Postgres database that use prisma to owe the object relational mapping. We also use prisma to interact with the Postgres via the backend to the website.
            <br>
            <br> For the backend we use the Postgres database that use prisma to owe the object relational mapping. We also use prisma to interact with the Postgres via the backend to the website. The system contains 2 PostgreSQL databases, both within
            a single dockerised PostgreSQL instance: "care_quality_dashboard" and "keycloak".
        </div>


        <div class="h4 text-center" style="padding-bottom: 1.5em;">
            The "keycloak" database is entirely managed by Keycloak in the Keycloak Docker Container.<br> The "care_quality_dashboard" database is the system's own database storing information such as responses, questions, departments, hospitals, etc.
            An ER-UML diagram is below:

        </div>
        <div class="card-deck">
            <div class="card">
                <img class="card-img-bottom" src="static/picture/ER-UMLdiagram.jpeg">

            </div>
        </div>

        <br>
        <br>

        <div class="h4 text-center" style="padding-bottom: 1.5em;">
            As the UML diagrams shows. The backend can be split out of three layers, the bottom layer which kind of has semi on layers on each of them. The middle layer has the tracklist of the backend. And the top one has major details of user data. Each kind of
            dashboards on the top is like is like 3 parts of the dashboard. Each layer is almost independent of each of them and only got 1 or 2 connecting tables.
        </div>

    </div>
    <!-- end backend -->

    <!-- packages and api -->
    <div class="container">
        <h2 style="color:#00a2e8;">
            Packages and API Used
        </h2>
        <br>
        <div class="h4 text-center" style="padding-bottom: 1.5em;">
            The system's backend consists primarily of Next.js API routes to create a REST API that is consumed by the React-based frontend.
            The REST API documentation exists in the form of an OpenAPI 3 (Swagger) specification. 
            Consequently, the system is interact with Keycloak via the Keycloak Admin REST API -- 
            all actions that can be performed through the Keycloak Admin Console can also be performed through this Admin REST API.
            The Keycloak Admin REST API was only ever be used when running code on the server-side on API routes. 
            The admin credentials are required to generate an admin access token for use in the Admin REST API requests.
        </div>

    </div>

    <!-- end packages and api -->

    <!-- sitemap -->
    <div class="container">
        <h2 style="color:#00a2e8;">
            SiteMap
        </h2>
        <br>
        <div class="h4 text-center" style="padding-bottom: 1.5em;">
        The Sitemap shows how our frontend is organised and how users can navigate through our website. 
        The categories is dependent on what user type is currently accessing the website.
        </div>
    
        <!-- Slideshow container -->
        <div class="slideshow-container">
    
            <!-- Full-width images with number and caption text -->
            <div class="mySlides fade">
                <div class="numbertext">1 / 5</div>
                <p style="text-align:center">
                <img src="./static/image/sitemaps/Clinician_sitemap.drawio.png" style="width:52%">
                </p>

            </div>
        
            <div class="mySlides fade">
                <div class="numbertext">2 / 5</div>
                <p style="text-align:center">
                <img src="./static/image/sitemaps/department_sitemap.drawio.png" style="width:100%">
                </p>
            </div>
        
            <div class="mySlides fade">
                <div class="numbertext">3 / 5</div>
                <p style="text-align:center">
                <img src="./static/image/sitemaps/hospital_sitemap.drawio.png" style="width:75%">
                </p>
            </div>
            
            <div class="mySlides fade">
                <div class="numbertext">4 / 5</div>
                <p style="text-align:center">
                <img src="./static/image/sitemaps/healthboard_sitemap.drawio.png" style="width:49%">
                </p>
            </div>
    
            <div class="mySlides fade">
                <div class="numbertext">5 / 5</div>
                <p style="text-align:center">
                <img src="./static/image/sitemaps/admin_sitemap.drawio.png" style="width:80%">
                </p>
            </div>
        
            <!-- Next and previous buttons -->
            <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
            <a class="next" onclick="plusSlides(1)">&#10095;</a>
        </div>
        <br>
        
        <!-- The dots/circles -->
        <div style="text-align:center">
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
            <span class="dot" onclick="currentSlide(3)"></span>
            <span class="dot" onclick="currentSlide(4)"></span>
            <span class="dot" onclick="currentSlide(5)"></span>                        
        </div>
    </div>
    <br>
    <br>
    <!-- end sitemap -->

    <!-- footer bottom -->
    <div class="container">
        <div class="footer-bottom box-content section-bottom-only">
            <span>Copyright © 2021-2022 CareQualityDashboard, UCL IXN Team 20. All Rights Reserved.</span>
        </div>
    </div>
    <!-- end footer bottom -->

    <!-- script -->
    <script src="static/js/jquery-3.5.1.min.js"></script>
    <script src="static/js/bootstrap.bundle.min.js"></script>
    <script src="static/js/magnific-popup.min.js"></script>
    <script src="static/js/fakeLoader.min.js"></script>
    <script src="static/js/swiper-bundle.min.js"></script>
    <script src="static/js/contact-form.js"></script>
    <script src="static/js/jquery.nav.js"></script>
    <script src="static/js/main.js"></script>
    <script src="static/js/slider.sysdesign.js"></script>
    <!-- end script -->

</body>

</html>