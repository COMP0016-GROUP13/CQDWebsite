<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Implementation</title>


    <!-- font -->
    <link href="static/css/css2.css" rel="stylesheet">
    <!-- end font -->

    <link rel="stylesheet" href="static/css/bootstrap.css">
    <link rel="stylesheet" href="static/css/ionicons.min.css">
    <link rel="stylesheet" href="static/css/magnific-popup.css">
    <link rel="stylesheet" href="static/css/fakeLoader.min.css">
    <link rel="stylesheet" href="static/css/swiper-bundle.min.css">
    <link rel="stylesheet" href="static/css/style.css">
</head>

<body>

    <!-- loader -->
    <div class="fakeLoader"></div>
    <!-- end loader -->

    <!-- navbar -->
    <div style="padding: 5% 0 5% 0;">
        <nav class="navbar navbar-expand-md navbar-light fixed-top">
            <div class="container">
                <a href="index.html" class="navbar-brand">
                    <img src="static/picture/logo_2_onlylogo.png" alt="">
                    <h2>CQD</h2>
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <i class="icon ion-ios-menu"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul id="nav" class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Home</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="requirements.html">Requirements</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="research.html">Research</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="uidesign.html">UI Design</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="systemdesign.html">System Design</a>
                        </li>

                        <li class="nav-item current">
                            <a class="nav-link" href="implementation.html">Implementation</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="testing.html">Testing</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="evaluation.html">Evaluation</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="appendices.html">Appendices</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
    <!-- end navbar -->

    <!-- contents -->
    <div class="container" style="padding-bottom: 3%;">
        <div class="h1 col text-center" style="color:#00a2e8;">
            IMPLEMENTATION
        </div>
    </div>

    <div class="container" style="padding: 0 0 3% 0;">
        <h2 class="text-center" style="color:#00a2e8; border-style: double;">
            AUTHENTICATION
        </h2>

        <br>

        <div class="h3 text-center" style="padding-bottom: 1em; color:#00a2e8;">
            Login Process
        </div>

        <div class="h4 text-center" style="padding-bottom: 1em;">
            All authentication methods (login and registration) are handled by Keycloak. Currently, our Keycloak database runs within a dockerised container on our linode server. Using a custom realm file, we were able to instantiate roles for each specific type
            of user on our system. When a user tries to securely login into our system with the keycloak portal, the authentication process is offloaded to Keycloak to check that the username and password is held within the keycloak database. However,
            by using Prisma an ORM we can synchronize the data from the “Users” table from the keycloak database to our PostgreSQL database, which is hosted within a separate dockerised container.
        </div>

        <br>

        <div class="h3 text-center" style="padding-bottom: 1em; color:#00a2e8;">
            PROCESS 2: Registration
        </div>

        <div class="h4 text-center" style="padding-bottom: 1em;">
            From our Use-case diagram we wanted platform administrators to be able to add new hospital/health board users through our web-interface(front-end) rather than Keycloak. Therefore, the most common method of registering users was to allow them to join by
            URL. Once a user has been added, the keycloak server is automatically updated, with the user's credentials.
        </div>

    </div>

    <div class="container" style="padding: 0 0 3% 0;">
        <h2 style="color:#00a2e8; border-style: double;" class="text-center">
            VISUALISATIONS
        </h2>
        <br>

        <div class="h3 text-center" style="padding-bottom: 1em; color:#00a2e8;">
            Line Chart
        </div>

        <div class="h4 text-center" style="padding-bottom: 1em;">
            For a given dashboard most users can navigate to the statistics page where they can view a graph of their overall progress. The score for each standard is stored from a number between 0 to 4. Therefore, the best way to represent this data is to convert
            each score to a percentage. As a result, we can plot the Score (as a percentage) on the Y-axis and the Time (in Days) on the X-axis.
            <br>
            <br>

            <img src="./static/picture/graph.png" width="80%" alt="main line chart" class="img-thumbnail">

            <br>
            <br> The system makes use of the <code>Line</code> component from the <code>react-chartjs-2</code> library which is a react wrapper for the Chart.js library. Since Chart.js is a client-side JavaScript library we are required to have a specific
            format to render the graph. Therefore, we created another react component called <code>LineChart</code> to format the data from our API call to our PostgreSQL to correctly feed it into the Chart.js Line component.

            <br>
            <br>

            <div class="h3 text-center" style="padding-bottom: 1em; color:#00a2e8;">
                Quick Summary
            </div>
            <br>
            <img src="./static/picture/quick_summary.png" width="90%" alt="quick summary" class="img-thumbnail">
            <br>
            <br> Quick Summary section of the statistics page shows a mean of all self-assessments taken for the given dashboard. The section comprises of a Circle Accordion which makes use of the built-in circle component from react-suite. The process
            of calculating the average statistic for each health and safety standard is handled on the backend.
            <br>
            <br>

            <div class="h3 text-center" style="padding-bottom: 1em; color:#00a2e8;">
                Personal Analytics
            </div>
            <br>
            <img src="./static/picture/personal_analytics.png" width="90%" alt="personal_analytics">
            <br>
            <br> Like the quick summary section, the personal analytics section displays set phrases depending on the average of all self-assessments for the given dashboard. The following cases show which message is displayed depending on the score:

            <br>
            <br>
            <table class="table table-hover table-bordered text-center">
                <thead>
                    <tr>
                        <th scope="col">Message</th>
                        <th scope="col">average performance, p</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <img src="./static/picture/positive_standard_message.png" alt="postive summary">
                        </td>
                        <td>p &ge; 75%</td>
                    </tr>
                    <tr>
                        <td>
                            <img src="./static/picture/neutral_standard_message.png" alt="neutral summary">

                        </td>
                        <td> 25% &lt; p &lt; 75%</td>
                    </tr>
                    <tr>
                        <td>
                            <img src="./static/picture/negative_message_standard.png" alt="negative summary">
                        </td>
                        <td> p &le; 25%</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="h4 text-center" style="padding-bottom: 1.5em;">
            For a given dashboard most users can navigate to the statistics page where they can view a graph of their overall progress.
            <br> As each score is stored from 0 to 4. To represent the score as a percentage, we do a simple calculation:
            <br> Percentage = (score / 4) * 100
            <br>As a result, we can plot the Score as a percentage on the Y axis and the Time in Days on the X axis.  
            </div>
    </div>


    <div class="container">
        <h2 style="color:#00a2e8; border-style: double;" class="text-center">
            PAGE MANAGEMENT
        </h2>

        <br>

        <div class="h3 text-center" style="padding-bottom: 1em; color:#00a2e8;">
            Join Codes
        </div>

        <div class="h4 text-center" style="padding-bottom: 1em;">
            When head of hosplital and head of departments are logged into the system they can create unique urls for users to join their hospital and department respectively. There are two different pages created the implementation of this:
        </div>

        <br>

        <div class="h3 text-center" style="padding-bottom: 1em; color:#00a2e8;">
            Manage Questions and URLs
        </div>

        <div class="h4 text-center" style="padding-bottom: 1em;">
            Head of departments have access to a page where they can manage questions within a dashboard and edit their URLs:

            <br>
            <br>

            <img src="./static/image/implementation/EditQuestions.png" width="90%" alt="quick summary" class="img-thumbnail">

            <br>
            <br>

            <img src="./static/image/implementation/EditUrls.png" width="90%" alt="quick summary" class="img-thumbnail">

            <br>
            <br> Both these pages use PUT requests to their repective API's (api/questions and api/questionURLs) and because they are both different tables this is done quite easily. The query system again shows its utility here as we can pass the dashboard_id
            in as a parameter to the API in order to recieve the currect set of questions linked to the dashboard. Furthermore the table component itself performs it's own API calls. Each row is linked to a key which is standard practice for Next.js.
            The key in our system is also the question id which we can use to make a PUT or DELETE request to the api/question[id] endpoint. This efficient system make the codebase much cleaner and understandable.
        </div>




        <br>
        <div class="h3 text-center" style="padding-bottom: 1em; color:#00a2e8;">
            Viewing dashboards</div>
        <div class="h4 text-center" style="padding-bottom: 1.5em;">
            This page is key in our implementation of the whole system. To access all the proper functionality of all of the main pages of the application, a user must first travel through this page.
            The page is simple and just involves a GET request to /api/dashboard to fetch all the dashboard from the user's department. Keycloak stores the user's deparment_id so fetching is made simple
            through a WHERE clause.

            <br>
            <br>

            <img src="./static/image/implementation/view.png" width="90%" alt="quick summary" class="img-thumbnail">

            <br>
            <br> While this page is simple, each dashboard button is linked to its respecitve dashboard id. Using URL query parameters (e.g *URL*?dashboard_id=*some number*) we are able to pass this ID around to 
            all sub-pages. i.e the self reporting page and statistics page. This way we can pass this ID into the other API calls to fetch the correct questions for the correct dashboard
            <br>
            <br>
            The view page also comes with the search filter. Of course as the website scales, the number of dashboard may increase to a level where many pages are required. Our team has implented this feautre to make user expiienve much easier, espically for admins as they are able to see all 
            the dashboards for all the departments and hospitals. The search components makes use of the event loop applying a filter to the API response whenever the input field is edited; adding or removing buttons visible to the user.
        </div>

        <br>


        <div class="container">
            <h2 style="color:#00a2e8; border-style: double;" class="text-center">
                Admin Pages
            </h2>
    
            <br>
    
            <div class="h3 text-center" style="padding-bottom: 1em; color:#00a2e8;">
                Admin Manage Page
            </div>
    
            <div class="h4 text-center" style="padding-bottom: 1em;">
                Eventhough User Management comes in built within the Keycloak admin console we have expanded on the an admin page where they are able to create health boards, hospitals and other admins
                <br>
                <br>
    
                <img src="./static/image/implementation/adminMangage.png" width="90%" alt="quick summary" class="img-thumbnail">
    
                <br>
                <br>    
                <br> As standard practice this table is a component with each cell having it's own API calls to create new records within the system. This page uses API endpoints for creating users (POST /api/users), 
                and fetching data such as hospitals or health boards (GET /api/hospitals, GET /api/health_boards) through the API for administrators.
            </div>
    </div>






    <!-- end contents -->

    <!-- footer bottom -->
    <div class="container">
        <div class="footer-bottom box-content section-bottom-only">
            <span>Copyright © 2021-2022 CareQualityDashboard, UCL IXN Team 13. All Rights Reserved.</span>
        </div>
    </div>
    <!-- end footer bottom -->

    <!-- script -->
    <script src="static/js/jquery-3.5.1.min.js"></script>
    <script src="static/js/bootstrap.bundle.min.js"></script>
    <script src="static/js/magnific-popup.min.js"></script>
    <script src="static/js/fakeLoader.min.js"></script>
    <script src="static/js/swiper-bundle.min.js"></script>
    <script src="static/js/contact-form.js"></script>
    <script src="static/js/jquery.nav.js"></script>
    <script src="static/js/main.js"></script>
    <!-- end script -->

</body>

</html>